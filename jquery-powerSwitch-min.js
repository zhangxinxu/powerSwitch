/*!
 * powerSwitch.js by zhangxinxu(.com)
 * under MIT License
 * you can use powerSwitch to switch anything
*/
(function(window,$,undefined){var isAnimation=typeof history.pushState=="function";$.powerSwitch=function(elements,options){$(elements).powerSwitch(options)};$.extend($.powerSwitch,{getRelative:function(trigger,params){trigger=$(trigger);if(trigger.length==0){return $()}var arrTarget=[],isMoreToOne=false;trigger.each(function(index,element){var selector=$(this).attr(params.attribute)||($(this).attr("href")||"").split("#")[1];if(selector&&arrTarget[selector]!=true){var target=$();if(/^\w+$/.test(selector)){target=$("#"+selector);if(target.length===0){target=$("."+selector)}if(target.length===0){target=$(selector)}}else{target=$(selector)}target.each(function(index,element){arrTarget.push(element)});arrTarget[selector]=true}else{if(arrTarget[selector]==true){isMoreToOne=true}}});trigger.data("isMoreToOne",isMoreToOne);return $(arrTarget)},transition:function(target,duration,isReset){var transform="transform "+duration+"ms linear";if(isAnimation==false){return}if(isReset==true){target.css("webkitTransition","none").css("transition","none").data("hasTransition",false)}else{if(!target.data("hasTransition")){target.css({webkitTransition:"-webkit-"+transform,webkitBackfaceVisibility:"hidden",transition:transform,BackfaceVisibility:"hidden"}).data("hasTransition",true)}}},translate:function(target,key,value){var valueTransform="translate"+key+"("+value+")";isAnimation?target.css("webkitTransform",valueTransform).css("transform",valueTransform):target.css(key=="X"?{left:value}:{top:value})},animation:function(targetHide,targetShow,params){var container=null,that=this,noAnimate=params.animation=="none";var funTransform=function(target,key,value){if(parseInt(value)===value){value+="px"}if(isAnimation){that.transition(target,params.duration,noAnimate);that.translate(target,key,value)}else{target[noAnimate?"css":"animate"](key=="X"?{left:value}:{top:value},params.duration)}};if((targetShow&&targetShow.length)||(targetHide&&targetHide.length)){if(params.toggle==true&&params.animation=="translate"){params.animation="none"}switch(params.animation){case"translate":var indexHide=targetHide.data("index"),indexShow=targetShow.data("index");var objDirection={vertical:"Y",horizontal:"X"};if(indexHide!=undefined&&indexShow!=undefined){var hundred=100,isNext=true;if(params.prevOrNext){switch(params.prevOrNext.attr("data-type")){case"prev":isNext=false;break;case"next":isNext=true;break;default:isNext=indexHide<indexShow}}hundred=(isNext*2-1)*100;that.transition(targetShow.show(),params.duration,true);that.translate(targetShow,objDirection[params.direction],hundred+"%");setTimeout(function(){funTransform(targetHide,objDirection[params.direction],-1*hundred+"%");funTransform(targetShow,objDirection[params.direction],"0%")},17);params.prevOrNext=null}else{targetHide.hide();targetShow.show()}break;case"slide":if(params.duration!="sync"){if(targetHide){targetHide.slideUp(params.duration)}if(targetShow){targetShow.slideDown(params.duration)}}else{if(targetHide){targetHide.slideUp("normal",function(){if(targetShow){targetShow.slideDown()}})}else{if(targetShow){targetShow.slideDown()}}}break;case"fade":if(params.duration!="sync"){if(targetHide){targetHide.fadeOut(params.duration)}if(targetShow){targetShow.fadeIn(params.duration)}}else{if(targetHide){targetHide.fadeOut("normal",function(){if(targetShow){targetShow.fadeIn()}})}else{if(targetShow){targetShow.fadeIn()}}}break;case"visibility":if(targetHide){targetHide.css("visibility","hidden")}if(targetShow){targetShow.css("visibility","visible")}break;default:if(targetHide){targetHide.hide()}if(targetShow){targetShow.show()}}}else{if(params.container&&params.container.length){var position=params.container.data("position");container=params.container.get(0);if(params.direction=="vertical"){if(container.scrollHeight-container.clientHeight>=Math.max(position.top,1)){params.animation=="auto"?params.container.animate({scrollTop:position.top}):params.container.scrollTop(position.top)}else{funTransform(params.container,"Y",-1*position.top)}}else{if(container.scrollWidth-container.clientWidth>=Math.max(position.left,1)){params.animation=="auto"?params.container.animate({scrollLeft:position.left}):params.container.scrollLeft(position.left)}else{funTransform(params.container,"X",-1*position.left)}}}}}});$.fn.powerSwitch=function(options){var defaults={direction:"horizontal",eventType:"click",classAdd:"",classRemove:"",classPrefix:"",attribute:"data-rel",animation:"auto",duration:250,container:null,autoTime:0,number:"auto",hoverDelay:200,toggle:false,onSwitch:$.noop};var params=$.extend({},defaults,options||{});$.each(["disabled","prev","play","pause","next"],function(index,key){key=$.trim(key);var upperKey=key.slice(0,1).toUpperCase()+key.slice(1),paramsKey="class"+upperKey,lastChar=params.classPrefix.slice(-1);if(params[paramsKey]===undefined){if(params.classPrefix){if(/\-/g.test(params.classPrefix)){params[paramsKey]=lastChar=="-"?(params.classPrefix+key):[params.classPrefix,key].join("-")}else{if(/_/g.test(params.classPrefix)){params[paramsKey]=lastChar=="_"?(params.classPrefix+key):[params.classPrefix,key].join("_")}else{params[paramsKey]=params.classPrefix+upperKey}}}else{params[paramsKey]=key}}});var indexSelected=params.indexSelected||-1,numSwitch=parseInt(params.number)||1,hoverTimer=null,autoPlayTimer=null,eleRelatives=$(),lenRelatives=0;var self=$(this);if(self.length==0){if(params.container==null||params.autoTime==0){return self}}eleRelatives=$.powerSwitch.getRelative(self,params);if((lenRelatives=eleRelatives.length)==0){return self}if(indexSelected==-1&&params.toggle==false){if(params.classAdd){self.each(function(index,element){if(indexSelected!=-1){return}if($(element).hasClass(params.classAdd)){indexSelected=index}})}else{eleRelatives.each(function(index,element){if(indexSelected!=-1){return}if(params.animation=="visibility"){if($(element).css("visibility")!="hidden"){indexSelected=index}}else{if($(element).css("display")!="none"){indexSelected=index}}})}}var isMoreToOne=false,elePrev=$(),eleNext=$(),elePrevOrNext=$();var funStatePrevNext=function(indexWill){if(indexWill<=0){elePrev.addClass(params.classDisabled).removeAttr("title").attr("disabled","disabled")}else{elePrev.removeClass(params.classDisabled).attr("title",elePrev.data("title")).removeAttr("disabled")}if((lenRelatives-indexWill)/numSwitch>1){eleNext.removeClass(params.classDisabled).attr("title",eleNext.data("title")).removeAttr("disabled")}else{eleNext.addClass(params.classDisabled).removeAttr("title").attr("disabled","disabled")}};if(self.eq(0).data("isMoreToOne")==true){isMoreToOne=true;if(params.classDisabled){elePrev=self.eq(0),eleNext=self.eq(1);elePrev.data("title",elePrev.attr("title"));eleNext.data("title",eleNext.attr("title"));funStatePrevNext(indexSelected);if(indexSelected<=0&&params.container){$(params.container).scrollLeft(0).scrollTop(0)}}else{if(params.container){eleRelatives.clone().insertAfter(eleRelatives.eq(lenRelatives-1));eleRelatives=$.powerSwitch.getRelative(self,params);elePrevOrNext=self.eq(1)}else{elePrev=self.eq(0),eleNext=self.eq(1);elePrevOrNext=eleNext}}}var isOneToMore=false;if(self.length==1&&lenRelatives>1){isOneToMore=true}var funSwitchable=function(indexWill){var eleWillRelative=eleRelatives.slice(indexWill,indexWill+numSwitch);var eleSelected=null,eleWillSelect=null,eleRelative=null;if(params.toggle==false){if(isMoreToOne==true){if(params.container){var position=eleWillRelative.position();params.container=$(params.container);params.container.data("position",position);$.powerSwitch.animation(null,null,params);params.classDisabled&&funStatePrevNext(indexWill)}else{$.powerSwitch.animation(eleRelatives.eq(indexSelected,indexSelected+numSwitch),eleWillRelative,params)}params.onSwitch.call(this,eleWillRelative)}else{if(isOneToMore==true){$.powerSwitch.animation(null,eleWillRelative,params);params.onSwitch.call(this,eleWillRelative)}else{if(indexSelected!==indexWill){eleWillSelect=self.eq(indexWill);if(indexSelected>=0){eleSelected=self.eq(indexSelected);eleRelative=eleRelatives.eq(indexSelected,indexSelected+numSwitch)}else{eleSelected=$();eleRelative=$()}eleWillSelect.addClass(params.classAdd).removeClass(params.classRemove);eleSelected.addClass(params.classRemove).removeClass(params.classAdd);$.powerSwitch.animation(eleRelative,eleWillRelative,params);params.onSwitch.call(this,eleWillRelative,eleSelected,eleRelative)}}}indexSelected=indexWill}else{if((params.animation=="visibility"&&eleWillRelative.css("visibility")=="hidden")||(params.animation!="visibility"&&eleWillRelative.css("display")=="none")){$.powerSwitch.animation(null,eleWillRelative,params);display=true}else{$.powerSwitch.animation(eleWillRelative,null,params);display=false}params.onSwitch.call(this,eleWillRelative,display)}};var anchorSplit=location.href.split("#")[1];self.each(function(index,element){$(element).data("index",index);if(isMoreToOne==true){$(element).bind("click",function(){var indexWill,eleWill;if(params.classDisabled){if($(this).attr("disabled")){return false}if(index==0){indexWill=indexSelected-numSwitch;indexWill=Math.max(0,indexWill)}else{if(index==1){indexWill=indexSelected+numSwitch;indexWill=Math.min(indexWill,lenRelatives-1)}}funSwitchable.call(this,indexWill)}else{if(params.container&&lenRelatives>numSwitch){if(index==0){indexWill=indexSelected-numSwitch;if(indexWill<0){eleWill=eleRelatives.eq(indexSelected+lenRelatives);$(params.container).data("position",eleWill.position());$.powerSwitch.animation(null,null,$.extend({},params,{animation:"none"}));indexWill=indexSelected+lenRelatives-numSwitch}}else{if(index==1){indexWill=indexSelected+numSwitch;if(indexWill>lenRelatives*2-numSwitch){eleWill=eleRelatives.eq(indexSelected-lenRelatives);$(params.container).data("position",eleWill.position());$.powerSwitch.animation(null,null,$.extend({},params,{animation:"none"}));indexWill=indexSelected-lenRelatives+numSwitch}}}funSwitchable.call(this,indexWill);elePrevOrNext=$(this)}else{index?funPlayNext(this):funPlayPrev(this);elePrevOrNext=$(this)}}return false})}else{if(isOneToMore==true){$(element).bind("click",function(){var indexWill;if(params.number=="auto"){numSwitch=lenRelatives}if(!$(this).attr("disabled")){if(indexSelected==-1){indexWill=0}else{indexWill=indexSelected+numSwitch}funSwitchable.call(this,indexWill);if(indexWill>=lenRelatives-1){$(this).addClass(params.classDisabled).attr("disabled","disabled").removeAttr("title")}}return false})}else{if(params.eventType=="click"){$(element).bind("click",function(){params.prevOrNext=$(this);funSwitchable.call(this,index);if(this.id!==$(this).attr(params.attribute)){return false}});if(anchorSplit&&element.href&&anchorSplit==element.href.split("#")[1]){$(element).trigger("click")}}else{if(/^hover|mouseover$/.test(params.eventType)){$(element).hover(function(){params.prevOrNext=$(this);clearTimeout(hoverTimer);hoverTimer=setTimeout(function(){funSwitchable.call(element,index)},parseInt(params.hoverDelay)||0)},function(){clearTimeout(hoverTimer)})}}}}});eleRelatives.each(function(index,element){$(element).data("index",index)});var funPlayNext=function(trigger){var indexWill=indexSelected+1;if(indexWill>=lenRelatives){indexWill=0}funSwitchable.call(trigger||self.get(indexWill),indexWill)},funPlayPrev=function(trigger){var indexWill=indexSelected-1;if(indexWill<0){indexWill=lenRelatives-1}funSwitchable.call(trigger||self.get(indexWill),indexWill)},funPlayPrevOrNext=function(){elePrevOrNext.trigger("click")},funAutoPlay=function(){clearTimeout(autoPlayTimer);if(funAutoPlay.flagAutoPlay==true){autoPlayTimer=setTimeout(function(){isMoreToOne==false?funPlayNext():funPlayPrevOrNext();funAutoPlay()},params.autoTime)}};if((isOneToMore==false&&params.toggle==false&&isMoreToOne==false)||(isMoreToOne==true&&!params.classDisabled)){if(params.container&&isMoreToOne==false){var htmlTempOperate="";self.length&&$.each(["Prev","Pause","Next"],function(index,key){if(params.autoTime==0&&key=="Pause"){return}htmlTempOperate=htmlTempOperate+'<a href="javascript:" class="'+params["class"+key]+'" data-type="'+key.toLowerCase()+'"></a>'});params.container.append(htmlTempOperate).delegate("a","click",function(){var type=$(this).attr("data-type"),classType=params["class"+type.slice(0,1).toUpperCase()+type.slice(1)],indexWill=indexSelected;switch(type){case"prev":params.prevOrNext=$(this);funPlayPrev();break;case"play":funAutoPlay.flagAutoPlay=true;$(this).attr("data-type","pause").removeClass(classType).addClass(params.classPause);funAutoPlay();break;case"pause":funAutoPlay.flagAutoPlay=false;$(this).attr("data-type","play").removeClass(classType).addClass(params.classPlay);funAutoPlay();break;case"next":params.prevOrNext=$(this);funPlayNext();break}return false})}if(params.autoTime){var arrHoverPlay=[self,eleRelatives,params.container];if(isMoreToOne==true||(document.body.contains&&params.container&&params.container.get(0).contains(eleRelatives.get(0)))){arrHoverPlay=[self,params.container]}$.each(arrHoverPlay,function(index,hoverTarget){if(hoverTarget){hoverTarget.hover(function(event){if(event.pageX!==undefined||params.eventType=="click"){clearTimeout(autoPlayTimer)}},function(event){if(event.pageX!==undefined||params.eventType=="click"){funAutoPlay()}})}});funAutoPlay.flagAutoPlay=true;funAutoPlay()}}return self}})(window,jQuery);